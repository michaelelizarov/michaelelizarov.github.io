# מילון סייבר - קורס JB-Magen-7736-30

## תוכן עניינים

1. [02 - Network Research](#02---network-research)
   - [99 - Project](#99---project)
2. [03 - Windows Forensics](#03---windows-forensics)
   - [01 - Files And Disks](#01---files-and-disks)
   - [02 - Automatic Carving](#02---automatic-carving)
   - [03 - Metadata](#03---metadata)
   - [04 - Steganography](#04---steganography)
   - [05 - File System Analysis](#05---file-system-analysis)
   - [06 - Artifacts](#06---artifacts)
   - [07 - Registry Analysis](#07---registry-analysis)
   - [08 - Memory Analysis](#08---memory-analysis)
   - [09 - Windows Events](#09---windows-events)
   - [10 - Network Analysis](#10---network-analysis)
   - [100 - Scenario](#100---scenario)
   - [99 - Project](#99---project-1)
3. [04 - Penetration Testing](#04---penetration-testing)
   - [01 - Information Gathering](#01---information-gathering)
   - [02 - Scanning](#02---scanning)
   - [03 - Enumeration](#03---enumeration)
   - [04 - Exploitation](#04---exploitation)
   - [05 - Meterpreter](#05---meterpreter)
   - [06 - Payloads](#06---payloads)
   - [07 - Post Exploitation](#07---post-exploitation)
   - [08 - Social Engineering](#08---social-engineering)
   - [09 - WebApp Security](#09---webapp-security)
   - [99 - Project](#99---project-2)
4. [05 - Network Security](#05---network-security)
   - [01 - Subnetting](#01---subnetting)
   - [02 - Network Attacks](#02---network-attacks)
   - [03 - Domain Setup](#03---domain-setup)
   - [04 - Domain Events](#04---domain-events)
   - [05 - PowerShell](#05---powershell)
   - [06 - Domain Enumeration](#06---domain-enumeration)
   - [07 - Domain Exploitation](#07---domain-exploitation)

---

## 02 - Network Research

### 99 - Project

#### מושגי יסוד בסקריפטינג

**הזחה** - לעשות את הסקריפט שלי יותר נעים לקריאה בעין, יש שפות שזה חייב, בBASH זה לא

**הערות** - חשוב מאוד לשים הערות מכיוון שאחרי X זמן אנחנו כבר לא נזכור מה היה שמה וגם במידה ומישהו אחר ירצה להסתכל על זה אז יהיה לו קשה יותר בלי זה

**if** - תנאי, פעולה בעולם התכנות שעובדת בצורה הבאה:
אם התנאי מתקיים/לא מתקיים, תעשה 1 2 3 4, אחרת תעשה 5 6 7 8
מסתיים בfi

**for** - לולאה, פעולה בעולם התכנות שעובדת בצורה הבאה:
תעשה את הפעולה הבאה X פעמים, אפשר לתת לו רשימה של שמות והוא יתייחס אל כל אחד ואחד מהם כמשתנה
מסתיים בdone

#### מושגי אבטחה

**spoof** - אפשרות הסתרה שהתוקף לא יוכל להיות מזוהה באמת

**SSH** - דרך החברות מאובטחת/מוצפנת בדרך כלל זה יהיה קיים בשרתי לינוקס, עובד בפורט 22

#### פקודות וכלים

**uptime** - פקודה להצגת כמה זמן המחשב פעיל

**Whois** - אופציה שיש לנו לקבל מידע מפורט על כתובת IP או שם דומיין, קיים בצורה של פקודה

**nmap** - כלי לסריקת פורטים

**sshpass** - אפשרות לחיבור דרך SSH אם תוספת של הוספת סיסמה באותה שורת פקודה

#### כלי אנונימיות

**Nipe** - כלי שיכול לעשות אותנו אנונימיים, הערה קצת בעייתי לעבוד איתו, מתכון לתקלות

**Anonsurf** - עוד כלי שיכול לעשות אותנו אנונימיים, יותר קל לעבוד איתו

#### רשת אפילה

**רשת אפילה** - רשת שלא זמינה לגלישה בדפדפן רגיל צריך לעבוד עם TOR
אתרים ברשת זו יסתיימו בסיומת של .onion

**TOR** - פרויקט שנועד לתת מענה בגלישה בסתר ובצורה אנונימית
הערה: ארצות הברית מממנת מעל חצי מהתרומות/רכיבים של הפרויקט הזה, להשתמש בזהירות רבה

**torify** - כלי עזר לגלישה בצורה אנונימית בתשתית של TOR

#### מושגי תכנות מתקדמים

**functions** - פונקציות, פעולה בעולם התכנות שעובדת בצורה הבאה:
בונה פונקציה/תהליך רב פעמי שישרת אותי כמה פעמים במהלך הקוד
הערה: מאוד נכון לעבוד איתו

#### הרשאות וקבצים

[https://chmod-calculator.com](https://chmod-calculator.com)

**chmod** - change modification - פקדוה בלינוקס שנועדה לשנות הרשאות בקבצים/תיקיות שלי

**SH** - SHELL, גרסה ישנה של חלונות טרמינל בלינוקס

**BASH** - burn again shell, גרסה יותר חדשה של חלונות טרמינל בלינוקס

**\#\!/bin/bash** - צורת עבודה בסקריפטים מסוג BASH, נשים אותו בכל תחילת סקריפט

#### משתנים ופקודות

**משתנים** - ייצור שמשתמשים בו הרבה בעולם התכנות, מכיל ערך מסוים בקוד

**$()** - אופציה להריץ פקודה ולהתייחס אליה כמשתנה

**משהו ()** - צורת עבודה עם פונקציות

#### קישורים שימושיים

  - [https://linuxconfig.org/bash-scripting-tutorial](https://linuxconfig.org/bash-scripting-tutorial)
  - [https://www.geeksforgeeks.org/bash-scripting-introduction-to-bash-and-bash-scripting/\#how-to-write-bash-scripts](https://www.geeksforgeeks.org/bash-scripting-introduction-to-bash-and-bash-scripting/#how-to-write-bash-scripts)

**git** - כלי להורדה/העלאה של קבצים מתוך אתר github

**&\>/dev/null** - דרך להסתיר פלט בסקריפט שלנו


[https://github.com/bsbsmaster/remote-control-ssh-/blob/main/ssh.sh](https://github.com/bsbsmaster/remote-control-ssh-/blob/main/ssh.sh)

---

## 03 - Windows Forensics

### 01 - Files And Disks

#### מושגי אבטחה כלליים

**OTP** - אימות בשני שלבים

**VPN** - כלי לחיבור מרחוק בצורה מאובטחת

**SOC** - העיניים הראשונות של אבטחת מידע

**IR** - תגובה ראשונית

**אנשי פורנזיקה** - חוקרי מחשב

#### מושגי קבצים

**offset** - מיקום יחסי של הקובץ בדיסק

**magic number** - מזהה ייחדוי הקסהדצימלי של קובץ

**header** - תחילת קובץ

**trailer** - סיום קובץ

דוגמאות: D23, 68BC
הערה: לא לכל הקבצים יש סיומת, אבל זה לא גורע מאיתנו להתמודד עם זה

#### כלים ומושגים נוספים

**rubber ducky** - כלי מבוסס דיסק און קי

**CyberChef** - כלי להצפנות ופיענוחים

**pwd** - מראה מיקום טקסט

**APT** - האקרים ברמת תמיכה מדינית

**מחושב קוואנטי** - השלב הבא בחישובים של מחשב

### 02 - Automatic Carving

#### מושגי אבטחה

**IOC** - indicator of comprise

**TTPS** - tactics, techniques and procedures

**APT** - קבוצות תקיפה מתקדמות

**Muddywater** - example of APT

**פישינג** - נסיון לדוג מידע מהקורבן

**ransomewahere** - ווירוס כופר

#### פקודות ומושגים

**הסימן |** - אומר שכל מה שנמצא לפני עובר מניפולציה למשהו שיהיה אחרי הסימן |

#### כלי חילוץ

**binwalk** - אחד מהכלים הבסיסיים למציאה וחילוץ דיי בסיסי של מידע

**bulk\_extractor** - כלי לחילוץ מידע מאוד מתקדם, יכול לחלץ דברים ספציפיים כגון: מיילים, כתובות IP וקבצי תקשורת מסוג pcap

**foremost** - עוד כלי לחילוץ מידע רק שעובד על קבצי קונפיגורציה

**scalpel** - כמו הכלי הקודם רק נכתב יותר טוב

#### פקודות לינוקס

**dd** - פקודה להעתקת קבצים בצורה מאוד מדויקת

**strings** - פקודה שנותנת לנו את האפשרות לראות מידע שצורה שמובנת לבן אדם

**grep** - פקודה למציאת מחרוזות מסוימים, ניתן להגיע איתו לאוטומציות וכלים מתקדמים

**curl** - פקודה שדומה לדפדפן שנועדה להציג/למשוך נתונים מהרשת

**ll** - like "ls -l" only shorter alias

**wget** - כמו curl רק לא קיים ברוב הפצות לינוקס

**rm** - פקודה למחיקת קבצים מסוכן מאוד כשמריצים אותו עם משתמש root ובמיוחד בצורה הבאה "rm -rf /"

**rmdir** - פקודה למחיקת תיקייה ריקה

**Exception** - מסמן לי שגיאה מסוימת

**find** - פקודה לחיפוש/הצגה של קבצים

#### מושגים נוספים

**root** - המלצה של התעשייה לא לעבוד עם המשתמש הזה, רק כשחייב

**chown** - דומה לchmod רק שהוא עושה שינוי בעלים של קובץ/תיקייה

**open source** - קוד שניתן לשיתוף עם כולם ושאפשר לעשות איתו מה שאני רוצה (במידה שהמפתח הסכים לכך), דוגמא לזה זה מערכת הפעלה לינוקס

**ubuntu** - מערכת הפעלה ידידותית למתחילים ללינוקס

**config** - קיצור של קובץ קונפיגורציה ניתן למצוא קבצים כאלה בדרך כלל תחת תיקייה /etc/

**\#** בתוך קבצי קונפיגורציה אומר שזה הערה

#### עורכי טקסט

**vim/vi** - כלי עריכת מתקדם, בשביל לערוץ טקסט צריך ללחוץ על כפתור insert או כפתור האות i, בשביל למחוק תוו אחד לוחצים על כפתור delete

בשביל לצאת ממצב insert ולשמור קובץ לעשות את הסדר פעולות הבא:

  - ללחוץ על כפתור esc
  - לכתוב :wq
  - במידה והקובץ לא נותן להישמר להוסיף \!

#### התקנת כלים

**sudo apt install foremost** - בשביל להתקין foremost

#### תיקיות ברירת מחדל

  - **binwalk** - מתחיל בתוו \_ ואז שם הקובץ ובסוף יהיה extracted
  - **bulk\_extractor** - חייב לציין לו שם תיקייה משלכם לבחירתכם
  - **foremost** - יותר תיקייה בשם output
  - **scalpel** - יותר תיקייה בשם scalpel-output

#### פקודות נוספות

**man** - אפשרות לקבל יותר אינפורמציה על פקודות (לא תמיד קיים הסבר על כל פקודה, תלוי המפתח שפיתח את זה)

**cat** - פקודה להצגת תוכן של קבצים

**awk** - פקודה לעשות איתה מניפולציה של מידע ברמה גבוהה ביותר

**sort** - כשמו כן הוא, עושה סדר לפי האלף בית

**uniq** - כשמו כן הוא, נותן לנו תוצאות חד פעמיות

**wc** - סופר את כמות השורות

### 03 - Metadata

#### סוגי מטאדאטה

**metadata** - המידע על המידע

**internal metadata** - מידע שקיים בתוך הקובץ (עשיר במידע לחוקרים)

**external metadata** - מידע שקיים מחוץ לקובץ (מכיל מעט מאוד מידע אבל עדיין חשוב)

**exif** - סוג מסוים של מטאדאטה שקיים בעיקר בתמונות אבל לא רק

#### כלים

**exiftool** - מחלץ את המטאדאטה מתוך הקבצים

**regex** - שפה מתקדמת ליצירת תבניות לדוגמא \* מתייחס להכל

### 04 - Steganography

#### מושגים

**steganography** - הסתרת מידע במקום שלא יטרחו לחפש

**ads** - דרך נוספת להסתיר ניתן למצואו דרך dir /r

#### פקודות Windows

**dir /r** - פקודה בווינדוס למציאת ADS

בשביל לפתוח קבצי ADS דרך השורת פקודה נשתמש בכלים כמו notepad, mspaint, winrar, mseadge

**copy / b** - פקודה בווינדוס דרך להסתיר קובץ בתוך קובץ (יותר קל לגילוי בעזרת כלים כמו HxD biwalk)

**type** - פקודה בווינדוס כמו הפקודה cat בלינוקס

#### כלים לינוקס

**steghide** - כלי בלינוקס שיודע להסתיר קבצים בשיטת סטגנוגרפיה + סיסמה להצפנה

**stegseek** - כלי בלינוקס שיודע להגיד עם בוצע שימוש ב steghide על הקובץ

**hexdump** - פקודה בלינוקס שעושה את אותו הדבר כמו ב HxD

**Format-Hex** - פקודה בווינדוס שעושה את אותו הדבר כמו ב HxD

#### מושגים נוספים

**file system** - צורת חלוקה בכונן שלנו כמו NTFS,FAT32

**rockyou.txt** - רשימה של סיסמאות מוכרות לפריצה

דוגמא להורדה של rockyou.txt:
[https://www.cse.msu.edu/\~cse231/PracticeOfComputingUsingPython/04\_Functions1/Password\_Cracking/rockyou.txt](https://www.cse.msu.edu/~cse231/PracticeOfComputingUsingPython/04_Functions1/Password_Cracking/rockyou.txt)

### 05 - File System Analysis

הערה: לפני שמתחילים לעבוד חייב להציג קבצים נסתרים ולהציג קבצי מערכת נסתרים

#### קבצי NTFS

**NTFS** - new technology file system - מערכת קבצים שיודעת לנהל בצורה חכמה את הקבצים במערכות הפעלה של ווינדוס

**$MFT** - master file table - קובץ שקיים בכל כונן, מכיל תיעוד של כל הקבצים

**$LogFile** - קובץ שקיים בכל כונן, מכיל לוגים של מערכת + חתימת זמן

**$I30** - קובץ שקיים בכל תיקייה, מכיל תיעוד של כל הקבצים לאותה תיקייה

**$Bitmap** - מפה של איפה יש קלאסטרים בשימוש ואיפה אין

**$BadClus** - מפה של איפה יש קלאסטרים בעיתיים

#### קבצי מערכת

**pagefile.sys** - קובץ שנועד לעזור לזיכרון הנדיף במידה והזיכרון נחנק חלק מהתוכן של הזיכרון ייכתב שמה

**swapfile.sys** - קובץ שנועד לעזור לזיכרון הנדיף, נמצא בשימוש במקרים מסוימים

**hiberfil.sys** - קובץ שנכתב במידה והמחשב נכנס למצב של שינה

#### הצפנה ואבטחה

**EFS** – מנגנון הצפנה של ווינדוס לקבצים, בשביל לפתוח את הקבצים חיים את השם משתמש וסיסמה

**BitLocker** - מנגנון הצפנה של ווינדוס לכל הכונן

**SAM/System** - קובץ ששמה שמור כל המשתמשים והסיסמאות שלהם (C:\\Windows\\System32\\config)

#### תאריכים

**siCreateTime** - תאריך שמבוסס לפי מה שקיים במערכת ההפעלה, ניתן לשינוי

**fnCreateTime** - תאריך שמבוסס לפי מה שקיים בכונן עצמו, לא ניתן לשינוי

#### כלים

**FTK** - כלי לחקירת מערכות הפעלה ווינדוס

**mftdump** - $MFT 2 text
פקודה לדוגמא:

```
mftdump.exe $MFT -o MFT.txt
```

הערה בנוגע לעבודה עם אקסל:
לאקסל יש מגבל של 1048576 שורות ו 16384 עמודות
ולכן מומלץ לעבוד עם כלים שאין להם את המגבלה הזו

חוץ מאקסל אפשר גם לקרוא את הקבוץ בלינוקס
פקודה לדוגמא:

```
cat mft.txt | awk '$4=="1" {print $(NF-12)}'
```

#### כלי פריצה

**bitlocker2john** - כלי פריצה שיודע לייצר האש שג'ון יוכל לפרוץ
פקודה לדוגמא:

```
bitlocker2john -i BitLocker.vmdk > hash_2_crack.txt
john hash_2_crack.txt
```

**impacket-secretsdump** - כלי פרצה שיודע לייצר האש שג'ון יוכל לפרוץ
פקודה לדוגמא:

```
impacket-secretsdump -sam sam.hive -system system.hive local > hash_2_crack_ntlm.txt
john hash_2_crack_ntlm.txt --format=nt
```

**powershell** - שורת פקודה כמו cmd רק שהיא עדיין נתמכת על ידי ווינדוס ועדיין מקבלת עדכונים

### 06 - Artifacts

#### מושגים

**artifacts** - ראיות שיכולות לעזור לנו בבניית פרופיל או בחקירת

#### סוגים של artifacts:

**registry** - מקום שבו נרשמים כל השינויים בווינדוס (נרחיב על זה בשיעור הבא)

**prefetch** - מקום שבו נרשמים כל הקבצי הרצה שהמשתמש הריץ (לטובת הגברת מהירות ההרצה של אותם תוכנות)

**lnk files** - קבצי קיצורי דרך

**event logs** - יומן אירועים של מה שהיה, ישנם כמה סוגים של לוגים (security, System, Application)

**Browser data** - מידע מתוך דפדפנים כגון היסטוריה

**browser cookies** - מידע שעוזר לנו בגלישה ברשת, חברות שסוחרות במידע אוהבות את זה מאוד

**cache** - מידע שהוא זמני ונדיף (נמחק לאחר זמן קצר)

**recents** - תיקייה בווינדוס שנותנת לנו מידע היסטורי של איזה קבצים/תיקיות נגשנו

#### כלים וגופים

**nirsoft** - גוף פרטי שכתב/כותב מלא כלים שיעזרו לנו במהלך השיעור

**recycle bin** - סל המיחזור קיים בכונן C קובץ ממשי שאפשר לחקור אותו בהמשך

**AppData** - תיקייה שמכילה מידע מאוד מעניין על המשתמש, נמצא בשימוש גם בווירוסים

**run** - חלונית שנותנת לנו להריץ פקודות בווינדוס בצורה מהירה

#### מושגים נוספים

**proccess** - תהליך במערכת הפעלה לדוגמא cmd (חשוב מאד להכיר לאנשי סייבר)

**S-1-5-21....** - עוד דרך לרשום שמות משתמשים בווינדוס

**batch/cmd** - שפה סקריפטים מאוד פשוטה אבל עושה את העבודה

**IPC$** - תיקייה שמשותפת בברירת מחדל, היא אחת מתוך כמה (C$,PRINT$,FAX$,SYSVOL,NETLOGOGN)

**time format** - DD day - MM month - YYYY year

**dir** - פקודה בווינדוס להציג תוכן של תיקייה (כמו ls)

#### כתובות רשת

**internal ip address** - 10.0.0.0, 172.16.0.0, 192.168.0.0

**public ip** - כל מה שלא ננמצא ברשימה למעלה

### 07 - Registry Analysis

#### מושגים בסיסיים

**registry** - מאגר ידע עצום של הגדרות וקונפיגורציות על המחשב ווינדוס עצמו

**Hive** - ערוץ מרכזי שמאגד הרבה מפתחות

**Key** - "תיקייה" בתוך אותו ערוץ

**Value** - הערכים עצמם של אותם הגדרות

**HKEY** - Hive Key (תיקייה ראשונית של אותו ערוץ)

#### כלים

**regedit** - כלי להצגת מידע של רג'יסטרי

**RegistryExplorer** - כלי כמו regedit אבל על "סטרואידים", מכיל פיצ'ר בשם bookmarking שמכיל קיצורי דרך משמעותיים

**DataInterpreter** - כלי מובנה בתוך RegistryExplorer שיעזור לנו להמיר את המידע שקיים ברג'יסטרי

#### פורמטי זמן

**Epoch** - פורמט זמן מסוימת שמחשבת את כמות השניות שעברו משנת 01/01/1970

[https://www.epochconverter.com](https://www.epochconverter.com) - אתר שיודע להמיר epoch לזמן נורמלי

**reg** - פקודה בcmd שנותנת לנו לעבוד עם רג'סטרי ולעשות לו אוטומציה, אפשר לעשות דבר דומה בpowershell

### 08 - Memory Analysis

#### מושגים

**RAM** - random access memory - זיכרון נדיף, היתרון שלו כתיבה/קריאה מאוד מהירים

**open source** - "קוד פתוח" - כלי בחינם ונתמך על ידי רבים/קהילה

**proccess** - תהליך שנכתב בזיכרון, בדרך כלל הוא נוצר מתוכנה, קריטי מאוד לחקירה

#### כלים

**volatility** - כלי קוד פתוח, סטנדרט בתעשייה, שנועד לחקור קבצי זיכרון שחולצו מהRAM

**ארכיטקטורת זיכרון** - x86-(32) x64, הצורה שבה הבייטים שלנו נכתבים/נקראים

**SP** - service pack - מיני שדרוג למערכת הפעלה windows

**profile** - בגרסאות הישנות יותר של volatility חייב לציין את סוג מערכת ההפעלה המדוברת + ארכיטקטורת זיכרון
לדוגמא: WinXPSP2x86

  - Win - מערכת הפעלה ווינדוס
  - XP - גרסת מערכת ההפעלה של ווינדוס
  - SP2 - מיני גרסת מערכת ההפעלה
  - x86 - ארכיטקטורת מעבד

**plugin** - הרחבה למוצר הקיים

**PID** - proccess ID - תעודת זהות על התהליך עצמו (ילד)

**Parent proccess ID** - התעודת זהות של האבא שיצר את PID

**env** - משתנה, מונח מעולם התכנות, מחביא תחתיו מידע מעניין, גם אותו אפשר לחלץ בעזרת volatility

**BSOD** - Blue Screen Of Death - שגיאה מאוד רצינית במערכת הפעלה ווינדוס, כמעט ואין מה לעשות עם זה חוץ מריסטארט, איום ונורא אם זה קורא

**Sysinternals** - כמו Nirsoft - מכיל הרבה מאוד כלים שרלוונטים לנו

**pstree** - פקודה בלינוקס בשביל לקבל עץ תהליכים (אבא/בן)

**Persistence** - דרך של תוקף/ווירוס להשיג אחיזה על המחשב/שרת שלנו, הרבה פעמים זה יהיה בעזרת מניפולציה על ערך הרג'יסטרי שלנו

**net user** - פקודה בווינדוס (cmd) ליצור משתמש + סיסמה

**FTP** - שרת/שירות/פרוטוקל שנועד לתת מענה לטובת העברת קבצים (עובד בפורט 21)

[https://crackstation.net](https://crackstation.net) - אתר שמאפשר לפרוץ סיסמאות שמוצפנות ברמה נמוכה

### 09 - Windows Events

#### מושגים בסיסיים

**Event log** - תיעוד מאוד מפורט של הפעולות שבוצעו במחשב שלנו
הערה: זה דורש הכנות כמו הגדרות של הפעלת הלוגים הספציפיים

**Event Viewer** - כלי של ווינדוס מגיע עם כל התקנה של מערכת ההפעלה, ניתן לגשת אליו בעזרת הפקודה eventvwr

יכולות קיימות:

  - **Filter** - לבחור רק לוגים ספציפיים שאני רוצה לראות
  - **Find** - לחפש דברים ספציפיים מתוך הלוגים שלי

**Big data analytics** - כלי לניתוח נתונים ברמה הרבה יותר גדולה מאשר לעבוד עם כלי כמו Event Viewer

**SIEM** - Security Information and Event Management - דוגמא למוצר שמרכז את כל הלוגים בארגון ועושה ניתוחים ברמה רוחבית

#### ערוצי לוגים

קיימים 3 ערוצים מרכזיים של לוגים:

1.  **Security** - לוגי אבטחה
2.  **System** - לוגי מערכת
3.  **Application** - לוגי יישומים

#### מבנה לוג

לוג לדוגמא בנוי מ:

  - **Event ID** - מזהה ייחודי של אותו אירוע/לוג שקרה
  - **TimeStamp** - נקודת זמן ייחודית לאותו לוג ספציפי (תאריך + שעה)
  - **Source** - המקור של הלוג לדוגמא Security
  - **User** - על איזה משתמש בוצע הפעולה הלוג
  - **Computer** - על איזה מחשב בוצע הפעולה הלוג

**Logon Type** - עוד מזהה ייחודי על צורת ההתחברות שבוצעה, לדוגמא חיבור רגיל, חיבור על גבי הרשת (SSH, RDP), קיים בלוגים מסוג התחברות כגון: 4624,4625

**RDP** - Remote Desktop Protocol - משתמש בפרוטוקול 3389 ונותן לנו אפשרות להתחבר מרחוק למחשב שלנו

**Timestomp** - דרך של תוקפים לשבש חקירה באמצעות שינוי מטאדאטה מסוג זמן

**evtx** - סיומת מוכרת של קבצי לוג של מערכת ההפעלה ווינדוס
הערה: אפשר להעתיק אותם מבלי להשתמש בכלים חיצוניים

הערה: לא כל הלוגים מגיעים בברירת מחדל, יהיו כאלה שאנחנו נצטרך להוסיף בעזרת Local Security Policy, ניתן לגשת אליו בעזרת השם secpol.msc

**Active Directory** - שרת שמנהל את כל הרכיבים בארגון (מחשבים פלאפונים מדפסות) כולל הגדרות לוגים

#### מושגי תקיפה

**Back Door** - מונח מעולם התקיפה שנועד לתת לתוקף גישה אחורית יכולה להיות מוסתרת, לדגומא יצירת משתמש

**Brute Force** - אפשרות פרוצה שבה התוקף "מנחש" את הסיסמאות/משתמשים הרלוונטיים

**Hydra** - כלי פריצה בלינוקס שבעזרתו אפשר לעשות מתקפת Brute Force

**Verbose** - בדרך כלל מיוצג על ידי האות v או V יכולת להצגת פלט ברמה הרבה יותר גבוהה ממה שאנחנו רואים בברירת מחדל

**WorkStation** - תחנת עבודה (המחשב שלכם)

**FQDN** - fully qualified domain name - השם המלא של המחשב שלי (WORKSTATION) = שם המחשב + הדומיין/קבוצת שייכות לארגון

**Windows Defender** - תוכנת הגנת ווירוסים מטעם מערכת ההפעלה

### 10 - Network Analysis

#### פרוטוקולים ושכבות

**MAC** - פרוטוקול/כתובת מיוצגת בשכבה ה2 (לפי מודל OSI/7 השכבות) שנותן לי מידע על הכרטיס רשת של הרכיב תקשורת

**IP** - פרוטוקל/כתובת מיוצגת בשכבה ה3 (לפי מודל OSI/7 השכבות) שנותן לי מידע על הרכיב תקשורת

**port** - שער כניסה/יציאה לוגי למחשב שלנו

**protocol** - צורת "דיבור" מסוימת בין תוכנות
לדוגמא: TCP, 3 way handshake
הערה: לכל פרוטוקול יש את הפורט שלו, ואפשר לשנות את זה

**port knocking** - שיטת התמחקות מכלי סריקה כמו nmap אתה צריך לגשת לכמה פורטים ספציפיים ורק אז נפתחת גישה לפורט הרלוונטי

#### קבצי תקשורת

**pcap** - סיומת/סוג של קובץ מסוג תקשורת

**pcapng** - עדכון לסוג קובץ pcap

**Filter** - דרך להציג דברים ספציפיים

**Find** - דרך לחיפוש דברים ספציפיים

**אופרטור לוגי** - דרך לעשות חיפוש מתקמדת יותר
לדוגמא: AND (&&), OR (||), NOT (\!)

#### רשתות וכתובות

**subnet mask** - אומר לנו כמה כתובות IP (חוקיות) אפשר לשים בשרת הנ"ל
לדוגמא: 255.255.255.0 == אפשר בתאוריה לשים 256 כתובות בפועל 254 כתובות

**CIDR** - צורת ייצוג של רשת שמכילה כתובות/כתובת
לדוגמא: 192.168.1.1/32 == כתובת IP אחת לדוגמא שלנו

הערה: בכל רשת חוקית חייב להוריד לפחות 2 כתובות IP

1.  הכתובת הראשונה, לדוגמא ברשת 192.168.1.0/24 זה יראה ככה: 192.168.1.0 (network)
2.  הכתובת האחרונה, לדוגמא ברשת 192.168.1.0/24 זה יראה ככה: 192.168.1.255 (broadcast)
3.  **default gateway** - מיש שאחראי על היציאה שלי מהרשת הנוכחית שאני נמצא בה

[https://en.wikipedia.org/wiki/Classless\_Inter-Domain\_Routing](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing)

#### תקשורת Client-Server

**client** - מחשב שמבקש שירות
לדוגמא: גישה לאתר אינטרנט (בעזרת הפרוטוקל HTTP)

**server** - מחשב שנותן לי איזהשהו שירות
לדוגמא: אירוח אתרים (בעזרת הפרוטוקול HTTP)

איך אפשר לדעת מי זה השרת ומי זה הקליינט?

  - דרך 1 - להפעיל לוגיקה מסוימת שאומרת בדרך כלל בתחילת שיחה הקליינט הוא זה שיזום את "השיחה"
  - דרך 2 - להסתכל על השדה info בwireshark
  - דרך 3 - להסתכל על השדות source port ו- destination port ולעשות את הדבר הבא:
    אם הפורט קטן מ- 1024 כנראה שאותו IP שמשויך לאותו פורט יהיה השרת וההפך

#### פרוטוקולים נוספים

**DNS** - "ספר טלפונים" שיודע להמיר כתובות IP לשמות דומיין וההפך

**DHCP** - ניהול כתובות IP לרשת שלי, דואג לדברים כמו:זמינות ושלא יהיו התנגשויות של כתובות IP, מאוד נוח לעבודה

**APIPA** - מצב לא תקין שבו יש ל- 2 מחשבים שבאותה הרשת את אותה כתובת IP, או מצב שבו מחשב לא קיבל מהשרת DHCP כתובת IP
ואז מה שמתקבל יהיה בטווח של 169.254.0.1-169.254.254.254

**SMB/SMB2** - פרוטוקל לשיתוף קבצים, יכול להציג לנו משתמשים

**SMTP/IMF** - פרוטוקול לשליחת מיילם

**Broadcast** - צורת דיבור מסוימת שבה מישהו אחד "מדבר" אל כולם
לעניינו: כתובת IP אחת מסוימת פונה לכל הכתובות ברשת (255.255.255.255)
הערה: מדובר במידע שלא ייצא מהרשת המקומית שלנו (LAN)

**segmentation** - חלוקת הרשת שלנו לתתי רשתות
לדוגמא: 192.168.1.0/28 == רשת קטנה עם 8 כתובות IP חוקיות

**public/private IP** - כתובות פנימיות לדוגמא:

  - 192.168.0.0
  - 172.16.0.0
  - 10.0.0.0
  - 169.254.0.0
  - 127.0.0.0

כל מה שלא זה יהיה כנראה כתובת חיצונית
הערה: בכתובות ציבוריות אפשר למצוא את המדינה מכיוון שיש חלוקה עולמית של טווחי כתובות בין מדינות

**NAT** - פרוטוקול תקשורת שנועד "להסתיר" את הכתובת האמיתית שלי

**man in the middle** - מתקפה ידועה שאומרת שמישהו יכול "לשבת" או להאזין על הרשת שלי ולראות את הנתונים שעוברים ביני לבין מה שאני רוצה וההפך ומשמה הדרך סלולה להמשך התקיפה....

**NETBOIS/LLMNR** - פרוטוקל לתרגום שמות מחשב

#### כלים

**NetworkMiner** - כלי לווינדוס לחילוץ נתונים מקבצי pcap

**TOR NETWORK** - ארכיטקטורת רשת שנועדה להסתיר את הזהות האמיתי שלך - האתרים שלו מיוצגים על ידי סיומת של .onion

**הרשת האפילה** - רשת שלא נגישה למשתמש רגיל אלא רק דרך רשת TOR - האתרים שלו מיוצגים על ידי סיומת של .onion

### 100 - Scenario

#### WF002

**DLP** - Data Leak Prevention - מושג שמדבר על זליגת מידע חשוב מארגון

**scp** - פקודה שנועדה להעתיק קבצים על גבי פרוטוקול SSH

**shadow** - קובץ שמכיל את כל שמות המשתמשים + סיסמאות מוצפנות של לינוקס (דומה לקובץ SAM של וונדוס)

**OCR** - Optical Character Recognition - תהליך המרה מתמונה לקובץ טקסט בהסתמך על הפיקסלים

**file** - פקודה בלינוקס שאמורה לתת לנו מידע על סוג הקובץ

### 99 - Project

#### דוגמת סקריפט BASH

```bash
#!/bin/bash

# this is my script, enjoy

# created function
function Check_the_current_user(){

# created if statement
if [ "$(whoami)" == "root" ]
then
echo "you are root!"
else
echo "you are not root!"
exit 1
fi
}

#calling function
Check_the_current_user
```

#### מושגים: דרכים לרשום פקודות מקוננות בלינוקס

**||** - תנסה את אחד מהפקודות האלה, חיסרון: מספיק הראשון שעובד ואז הוא מפסיק

**&&** - אתה חייב לעשות את כל הפקודות המקוננות, חיסרון: ברגע שאחד מהם לא תקין שאר הפקודות גם לא מבוצעות

**;** - אתה חייב לעשות את כל הפקודות המקוננות, ובמידה ואחד מהפקודות לא עובדת תמשיך הלאה

---

## 04 - Penetration Testing

### 01 - Information Gathering

#### מתודולוגיות תקיפה

**cyber kill chain** - נבנה מטודולוגיה שלמה על איך תוקפים פועלים בהקשר למה שקרה ב lockheed martin

**mitre attck** - עוד מטודולוגיה שמפרטת איך לתפוס/לזהות את התקיפה בכל אחד משלבי ה cyber kill chain

**reconnaissance** - שלב ראשוני כמעט בכל תקיפה שבו אני אוסף כמה שיותר נתונים על הקורבן

**OSINT** - Open Source Intelligence - מקור ידע שנגיש לכלם ויכול לספר לנו המון על הקורבן

**shadow it** - מערכות/מוצרים/רכיבים שקיימות בארגון שמי שצריך לדעת לא יודע שיש לו דברים כאלה

#### שיטות סריקה

יש 2 שיטות לסריקת מטרה:

1.  **פאסיבית** - שבה אני נגיש למקורות צד ג שיכולים לספר לי עליו
2.  **אקטיבית** - שבה אני נגיש למטרה ישירות

#### כלים וטכניקות

**google dorking** - שיטת חיפוש מתקדמת בגוגל (ולא רק) שיכולה לתת לנו מידע שבטוח שהקורבן לא היה רוצה שיצא החוצה

**shodan** - סוג של nmap מתקדם ששומר תוצאות היסטוריות

**pastebin.com** - אתר שתוקפים אוהבים לשים שמה פרטים אישיים שנגנבו

**haveibeenpwned.com** - אתר שנותן לנ מידע ספציפי האם החשבון שלי נפרץ או לא

**cherrytree** - כלי שעוזר לאנשי תקיפה (רשמיים) ליצור דוח על הקורבן

**bug bounty** - תוכנית שנועדה לעודד אנשים לגלות לארגון האם יש לו בעיות אבטחה, בדרך כלל זה גם יהיה מתוגמל בכסף או בפרסום

**Dmitry** - כלי תקיפה/סריקה שנותן לנו המון מידע על הקורבן

**tr** - עוד פקודה לעשות איתה מניפולציה בBASH

**api key** - מפתח לAPI ספציפי, משהו שאנחנו נרצה לשמור אותו בסוד כמו סיסמה

**subdomain** - תת דומיין שנמצא תחת הדומיין הראשי, יהיה מופרד באמצעות נקודה

**host** - פקודה ללינוקס לתרגום DNS לIP

### 02 - Scanning

**Metasploitable** - מכונה פגיעה לכתחילה של חברת Rapid7 (msfadmin שם משתמש וסיסמה)

#### סוגי סריקה

סוגי סריקה:

  - **אקטיבית** - סריקה שאני יוזם בקשות בעזרת כלים כמו NMAP
  - **פאסיבית** - סריקה שאני נמצא בטווח ומאזין לתקשורת כמו מתקפת man in the middle

סוגי איזורי סריקה:

  - **חיצוני** - יהיה מאוד קשה לתוקף לסרוק את כל הרכיבים שנמצאים ברשת הפנימית (LAN)
  - **פנימי** - החיים הרבה יותר קלים לתוקף מהסיבה שהוא כבר בתוך הרשת הפנימית (LAN) וכמעט ואין לו מה שיעצור אותו

**NDR** - network detection response - כלי הגנה שנועד למצוא אירועי תקשורת חריגים

#### פרוטוקולים

**TCP** - מוודא שיש שיחה

**UDP** - "שגר ושכח"

#### כלי סריקה

**NMAP** - כלי סריקה מאוד מתקדם

דגלים חשובים:

  - **--reason** - דגל מאוד חשוב שנותן לי את הסיבה למה NMAP החליט שמשהו פתוח/סגור
  - **--packet-trace** - דגל שמציג לנו את כל הבקשות תקשורת במקום לעבוד עם wireshark

הערה על NMAP: יש לו הרבה פעמים משחקי ניחוש

**Netdiscover** - כלי סריקה שעובד עם פרוטוקל ARP בשכבה ה2

**masscan** - כלי סריקה על סטרואידים, יכול לסרוק רשתות עצומות בדקות

**PPS** - packets per second - כמות הפקטות לשניה

**--rate** - דגל שנותן לי אפשרות לשלוח כמות עצומה של פקטות בכל שניה

**Port knocking** - יכולת הנגשת פורטים מתקדמת ומאובטחת שבה אני מחייב את הלקוח לעשות בדיקת פורטים מסוימת ורק אז אני אחצין אליו את הפורט הרצוי

**promiscuous mode** - בדרך כלל כרטיסי רשת מתעלמות מתעבורה שלא רלוונטית אליה אלא אם כן אני אפעיל את המצב "מופקר"

**XML** - פורמט מוכר כמו CSV/JSON ניתן להמרה לHTML בעזרת הפקודה

**scapy** - חבילה בפייתון שנותנת לנו לעשות מניפולציה על פאקטות ברמה גבוהה

### 03 - Enumeration

#### מושגים

**enumeration** - שלב יותר מעמיק בסריקה למציאת מידע נוסף מלבד כתובות IP ופורטים פתוחים

**security hygiene** - צורת עבודה נכונה שבה אני מוודא שהארגון שלי עובד כמו שצריך בשביל שלא ייפרץ

**SQL** - Structured Query Language - שפה שאיתה אנחנו נתשאל את שרתי המסד נתונים (data base) שלנו

**Banner Grabbing** - שיטת איסוף מידע שהאקרים עושים בשביל לקבל מידע חשוב לשאר שלבי התקיפה

**honeypot** - אפשרות "לעבוד" על ההאקרים ולהחצין דברים מפתים כדי לאסוף עליהם מידע חשוב

#### כלים

**netcat (nc)** - כלי בדיקות תקשורת, מאפשר לנו לעשות Banner Grabbing

**enum4linux** - כלי לינוקס שנועד לתת לנו מידע מפורט על שירותי RPC/SMB מסוימים כמו משתמשים קיימים

**rpcclient** - עוד כלי לינוקס שנועד לתת לנו מידע מפורט על שירותי RPC/SMB כמו משתמשים קיימים

**nbtscan** - עוד כלי לינוקס שנועד לתת לנו מידע מפורט על שירותי NetBIOS

**CVE** - Common Vulnerabilities and Exposures - איזושהי תעודת זהות של פגיעויות קיימות (כותבים אותו עם השנה שבה הפגיעות יצאה + מספר עולה)

#### Metasploit

**Metasploit** - פלטפורמה שמשומשת הרבה אצל האקרים, יכול לשרת אותנו במהלך כל השלבי "Cyber Kill Chain" (msfconsole)

**tomcat** - שירות להחצנת אתרים (עובד בדרך כלל עם פורט 80 או 443)

**msfconsole workspace** - איזורי אישי שבו אני אשמור את כל התוצאות של הסריקה ומאגרי נתונים של אותו קורבן ספציפי

metasploit file categories:

  - **exploit** - פריצות
  - **auxiliary** - סריקות
  - **payloads** - התוכן הזדוני של הווירוס
  - **encoders** - מצפינים
  - **post** - דברים שאפשר לעשות לאחר הפריצה הראשונית
  - **nops** -
  - **evasion** - דרכים להתחמק מכלי הגנה כמו אנטי ווירוס

**db\_nmap** - נותן לנו אפשרות לשמור את התוצאות לחקירת המשך בפלטפורמה של msfconsole

פקודות חשובות:

  - **info** - ייתן לנו מידע על אותו פירצה ספציפית שמוצעת בפלטפורמה
  - **run** - יריץ את אותה פירצה
  - **options** - יציג את האופציות ההכרחיות והלא
  - **set** - הגדרת ערכים בשביל שהפירצה תעבוד
  - **setg** - הגדרה כללית שתשים את אותו ערך לכל הפירצות הבאות

**samba** - שירות בלינוקס שבו ממומש פרוטוקול SMB

**kernel** - סוג של מערכת הפעלה בסיסית שעליה מסתמכת מערכת ההפעלה שאנחנו מכירים

### 04 - Exploitation

#### מושגי תקיפה

**privilege escalation** - שיטה בה תוקף מסלים הרשאות ממשתמש פשוט למשתמש בעל יכולות גבוהות כמו root/administrator

**DOS/DDOS** - מניעת שירות/מניעת שירות מבוזרת - תקיפה בה תקוף משבית את המטרה/קורבן בעזרת יצירת "צוואר בקבוק" בקורבן שלי

**Opisrael/OpJeruslaem** - אלה תאריכים קבועים שבו כל מי שלא אוהב אותנו תוקף בDDOS וכו

**Shell** - מעטפת מסוג שורת פקודה שנותנת לי שליטה על אותה המכונה, עובד עם TCP

#### מרכיבי פריצה

3 מרכיבים בסיסיים בפריצה (מוצלחת):

1.  שיהיה לנו את הפירצה שתביא אותנו עד אל הקורבן (פגיעות של גירסה מסוימת - CVE)
2.  שיהיה לנו את הפירצה שתרוץ על הקורבן לאחר שהגעתי אליו, בשביל להסלים הרשאות או לגנוב סיסמאות וכו
3.  שיהיה לנו את האופציה לשמור תמיד על קשר רציף עם הקורבן

מה צריך בשביל שיהיה פריצה קצת יותר באריכות:

1.  תקשורת בין ההאקר לקורבן
2.  שיהיה לקורבן איזושהי פגיעות
3.  נוזקה שיכולה לנצל את הפגיעות
4.  פירצה לקורבן
5.  קשר רציף עם הקורבן

#### סוגי Shell

2 סוגים שונים של SHELL:

1.  **bind shell** - דרך שבה התוקף מגיע אל הקורבן בעזרת port מסוים שהקורבן מאזין
2.  **reverse shell** - דרך מומלצת יותר שבה התוקף מקבל שליטה על הקורבן מבלי להיחסם על ידי ציודי תקשורת/FW וכו

**Payload** - זה התוכן של הנוזקה שתרוץ מה שיביא לי SHELL על הקורבן

**Post Exploitation** - מה אני עושה לאחר שיש לי שליטה בסיסית על הקורבן?, לדוגמא: privilege escalation

**Meterpreter** - יכול SHELL מתקדמת שיכולה להביא לנו כל מיני פיצ'רים מתקדמים שאנחנו יכולים לעשות על הקורבן (רץ בזיכרון ויכול לעשות Persistence)

#### מקורות מידע

**Exploit-DB** - אתר שמכיל הרבה פירצות

**SearchSploit** - אוותו אתר רק בגרסה של שורת פקודה

**0Day** - פירצה שאין לה מענה והיא בשימוש, הרבה פעמים החברה שאחראית על אותה תוכנה לא יודעת אפילו

**pwn2own** - תחרות שבה חברות ענק מבקשת מהאקרים "טובים" לפרוץ אליהם ולהביא להם תגמול כספי מאוד גבוה

#### כלים נוספים

**ncrack/medusa** - כלי פריצה כמו hydra

**VNC** - פרוטוקל שנועד לתת אפשרות UI למכונות שעובדות עם CLI

**vncviewer** - פקודה בלינוקס שיכולה לחבר אותנו באמצעות פרוטוקול VNC

**RUBY** - שפת תכנות "פשוטה"

**EDB-ID** - מזהה ייחודי של אותו פירצה לפי exploit-db

### 05 - Meterpreter

#### סוגי Payloads

2 סוגים של payloads:

1.  **staged** - מחולק לכמה חתיכות קטנות שכל אחת עושה את המשימה שלה, לדוגמא: הרצה ראשונית, יצירת קשר עם התוקף, וכו - יתרונות: נותן חשאיות
2.  **stageless** - הכל באותה חבילה - יתרונות: נותן יותר יציבות למתקפה

**msfvenom** - כלי שכלול כחלק מפלטפורמת metasploit (msfconsole), נועד ליצור payloads

#### טכניקות תקיפה

**process injection** - סוג תקיפה שבו האקרים מזריקים את התהליך הזדוני שלהם לתהליך לגיטימי כמן explorer.exe

**KeyLogger** - אפשרות להקליט את כל מה שהקורבן מקליד (יכול להיות בתוכנה ויכול להיות פיזית)

**Responder** - כלי תקיפה שמיועד לסביבת ווינדוס שבעצם מנצל הרבה פגיעויות באיך שכתבו פרוטוקולי תקשורת - גונב סיסמאות שרצות ברשת (MITM)

**psexec** - כלי שנוח לתפעול לאנשי תשתיות אבל מאוד מועדף להאקרים

#### עבודה עם msfconsole

איך אפשר לוודא שהDB של msfconsole עובד?

```
sudo service postgresql start
sudo service postgresql status
sudo msfdb init
sudo msfdb reinit
msfconsole -q
db_status
#[*] postgresql connected to msf
```

שיטות שונות בשביל להרוג/לצאת מסשן קיים:

  - **shell בסיסי** - ctrl +c הורג את הסשן, ctrl +z יוצא אבל שומר את הסשן
  - **mterpreter מתקדם** - exit הורג את הסשן, bg (background) יוצא אבל שומר את הסשן

**post** - סוג נוסך של payload שאנחנו נריץ אחרי שיש לנו אחיזה ראשונית על המחשב של קורבן
לדוגמא post/multi/manage/shell\_to\_meterpreter - מה שרת מאחורי הקלעים כשמריצים sessions -u number

**daemon** - תהליך שרץ ברקע

**shadow** - קובץ לינוקס ששמה שמורות כל הסיסמאות

סדר ההמרות: basic shell -\> meterpreter -\> channel

### 06 - Payloads

#### הכנת DB

שלבים להפעלת DB בmsfconsole:

```
sudo service postgresql restart
sudo msfdb reinit
```

לבדיקה שזה עובד:

```
msfconsole -q
db_nmap
```

#### פגיעויות מפורסמות

**NSA** - ארגון APT של הממשל האמריקאי וממומן על ידו, אין לו כמעט שום מגבלות

**EternalBlue** - פגיעות שנמצא במערכות הפעלה windows של הNSA

פודקאסט מומלץ לשמיעה:
[https://darknetdiaries.com/transcript/54/](https://darknetdiaries.com/transcript/54/)

#### מושגים טכניים

**shellcode** - הקוד/הפקודה עצמה בתוך הpayload שלי שתרוץ על הקורבן שלי

**--list-options** - דגל שמראה לי את האפשרויות מתקדמות לכל payload

**kiwi/mimikatz** - כלי פריצה לווינדוס בעיקר לגניבת סיסמאות

**Wiper** - סוג של ווירוס שנועד רק למחוק את כל המידע במחשב

**WMIC** - מעטפת של מערכת הפעלה windows שיכולה לתת אינטרקציה כמו cmd או powershell

פקודת CMD לקבלת גרסת מערכת הפעלה בעזרת פקודת WMIC:

```
wmic os get caption
```

**RHOST vs LHOST**:

  - **RHOST (remote host)** - משתנה שמציין את הכתובת של הקורבן
  - **LHOST (local host)** - משתנה שמציין את הכתובת של התוקף

**handler (המושג)** - האזנה בmsfconsole

**handler (הפקודה)** - פקודה בmsfconsole שחוסך לנו פקודות

**jobs** - פקודה בmsfconsole שמציג לנו את כל ההאזנות

הערות:

  - אפשר להריץ את הhandler שלנו בצורה של job שירוץ ברקע
  - msfvenom נותן לנו המון מידע מסוג metadata שלא היינו רוצים
  - חשוב מאוד לדאוג שmsfconsole ימשיך להאזין גם אחרי שיש לי shell 1 בהצלחה - דורש לעבוד עם הדגל ExitOnSession

**social engineering** - מניפולציה פסיכולוגית על הקורבן מה שגורם לו לעשות פעולות לא רצונויות במידה והיה מודע להשלכות שלהם

אופציות של איך אני מגיע להריץ ווירוס אצת הקורבן:

1.  תוקף רכיב פגיע אצל הקורבן - rdp לא מעודכן
2.  שולח מייל פישינג לקורבן
3.  מחבר DOK במחשב של הקורבן
4.  עושה לו social engineering

**base64** - צורת העברת מידע יש שיגידו שזה סוג של הצפנה

**elf** - פורמט מסוג exe של מערכת הפעלה לינוקס

### 07 - Post Exploitation

#### מושגים

**האקטיבזם** - לפרוץ מתוך אידיאולוגיה

**Anonymous** - קבוצת תקיפה האקטיביסטית מאוד מוכרת

**proxy** - רכיב תקשורת שמתווך ביני לבין העולם, יכול לעבוד ב2 ל2 הכיוונים

**post exploits** - פירצות שיגיעו רק אחרי שיש לי שליטה מסוימת על הקורבן
לדוגמא:

  - הסלמת הרשאות למשתמש חזק יותר
  - יצירת אחיזה
  - יצירת דלת אחורית

**migrate** - תהליך בתוך meterpreter שנותן לי לעשות הסתרה של הווירוס שמתקשר איתי בתהליך לגיטימי

**suggester** - מודול בתוך msfconsole מסוג post exploitation

  - תפקידו לבדוק הרבה פירצות שאפשר להריץ אותם על הקורבן
  - אפשר להריץ אותו רק אחרי שיש לי שליטה מסוימת על הקורבן
  - הוא יכול לתת לנו לדוגמא הרשאות גבוהות יותר
  - עובד עם shell מסוג meterpreter
  - יש לו יכולת "בדיקה" של פרצות בלבד (זה עדיין לא עושה אותו "שקט")

#### 5 דברים חשובים לוודא לפני שמריצים פירצה:

1.  exploit שאנחנו יודעים שמתאים למחשב של הקורבן (db\_nmap/suggester)
2.  exploit שקיבל ציון גבוה
3.  payload (במידה וזה אפשרי) מותאם לסוג מחשב של הקורבן
4.  target (במידה וזה אפשרי) מותאם לסוג מחשב של הקורבן
5.  lport (במידה ויש לנו reverse) להגדיר פורט אחר ממה שעבדנו עד עכשיו

**/home** - תיקיית הבית במערכת הפעלה לינוקס של כל המשתמשים הפשוטים שהם לא root

איך לצאת מהסשן מבלי לאבד שליטה על הקורבן:

  - shell - ctrl +z
  - meterpreter - bg

אם עשיתם בטעות ctrl +z בmsfconsole וזה יצא לכם לגמרי, אל דאגה תרשמו fg וזה יחזור לכם

**getsystem** - פקודה בmeterpreter שמעלה לי הרשאות למשתמש חזק (במידה ואפשר)

**idletime** - פקודה בmeterpreter שנותנת לי את כמות הזמן שעברה מאז השימוש האחרון במחשב

### 08 - Social Engineering

#### טכנולוגיות ומושגים

**HTML** - שפה שבה משתמשים בה באתרי אינטרנט

כל מייל מאחורי הקלעים זה קוד HTML כלשהו, אנחנו בתור מגיני סייבר ובכלל נרצה לבדוק את התוכן של המייל ולא להסתפק באיך שהוא נראה

**phishing** - שיטה שבה אני "דג" פרטים מסוימים מהקורבן

יש כמה סוגים של phishing:

  - **לא ממוקד** - אין לי פרטים מזהים של הנמען
  - **ממוקד - spear phishing** - שיטת דיוג ממוקדת שבה כבר יש לי פרטים מזהים כלשהם של הנמען

**קמפיין phishing** - שליחה של עשרות אם לא מאות מיילים לארגון/מדינה מסוימת

**DMARC** - פרוטוקל/שיטת חסימה שבה מוודאים שהשולח הוא זה שטוען שהוא (משתמש גם בבדיקת DKIM/SPF)

**social engineering** - תחום פסיכולוגי שתוקפים משתמשים לטובת השגת פרטים רגישים על הקורבן כמו שם משתמש/סיסמה בעזרת לדוגמא: מייל פישינג
חשוב מאוד שלא יגלו שאני עושה את זה

**social engineering framework** - פלטפורמה שהאקרים ישתמשו בה בשביל להכין את התשתית לטובת social engineering וכו

#### כלים

**SEToolKit** - כלי שיכול להעתיק אתרים מוכרים שישמשו אותי כהאקר בשביל לגנוב פרטים מהקורבן

**Ngrok** - אתר ליצירת קישורים שאפשר להשתמש בהם בכל מקום בעולם ולשייך אותם למחשב של התוקף

**Zphisher** - עושה כמעט את אותם דברים כמו SEToolKit חוץ מכמה דברים כמו שימוש בNgrok

**TheFatRat** - כלי ליצירת payloads מתקדמים ו"כמעט" בלתי ניתנים לגילוי לא כמו בmsfvenom ששמה רוב הpayloads מוכרים

**Hook** - שיטה שבה ברגע שהקורבן ניגש אליו ההאקר מקבל שליטה על הקורבן (דומה לshell)

**JS** - שפה מאוד בעייתית בעולם של אתרים, האקרים יכולים להשתמש בזה להזריק קוד זדוני/hook על הקורבן דרך איזהשהו אתר פישינג

**BeEF** - כלי של האקרים שנותן לנו פלטפורמה להקים אתרים להזריק להם קוד זדוני/hook ולשלוח לקורבן בשביל לקבל שליטה (מסוימת) על הקורבן

**202E** - תוו מיוחד שמחליף בין התווים שלפניו, האקרים יכולים להשתמש בזה לטובת שינוי סיומת של הווירוס

במידה ולא עובד לכם הBeEF:

```
git clone https://github.com/beefproject/beef
cd beef
sudo ./install
sudo bundle install
```

change user and pass from config.yaml:

```
from
user:   "beef"
passwd: "beef"

to
user:   "jbt"
passwd: "jbt"
```

```
sudo ./beef
```

במידה וזה עדיין לא עובד:

```
sudo apt-get update -y
sudo apt-get upgrade -y
```

ואז

```
sudo bundle install
./beef
```

**user-agent** - תעודת זהות של הדפדפן + מערכת הפעלה

**cache** - סוג של זיכרון נדיף, קיים בהרבה רכיבים כולל בדפדפן, לכן למעבדה שלנו כדאי לעבוד בגלישה בסתר כי שמה לא שומרים מטמון

**Iframe** - חלונית נוספת (נסתרת) שקיימת בתוך האתר, מאוד מסוכן להשתמש בזה כי יש על זה הרבה פגיעויות

**PE** - portable executable

### 09 - WebApp Security

#### מבנה אתר

אתר בנוי מ3 מרכיבים:

1.  **frontend** - הדף עצמו של האתר שאנחנו פוגשים עם הדפדן (כתוב בכמה שפות HTML/CSS/JavaScript)
2.  **backend** - שרת שמקבל את הבקשה מהfrontend ועושה עליו איזושהי מניפולציה (בשפת PHP)
3.  **database** - שרת שמאחסן/שולף את הבקשה שלנו (אפשר לתשאל אותו בשפת SQL)

**on-prem** - מונח שאומר שהתשתית נמצאית פיזית אצלי ולא בענן

**attack vector** - דרך/דרכים שהתוקף יכול לתקוף את הקורבן, לדוגמא port, service, person, web page

#### בקשות HTTP

יש כמה סוגים של בקשות:

  - **GET** - בקשה למידע מהאתר
  - **POST** - שליחת מידע לאתר

**Cookie** - קובץ שנועד לשמור על הסשן ביני לבין האתר כך שלא אצטרך לעשות התחברות כל פעם מחדש

**network headers** - מידע מסוג מטאדאטה שקיים בכל בקשת HTTP, האקרים יכולים לעשות על זה מניפולציה לטובתם

**wireshark** - אפשר לעשות Follow HTTP Stream ולראות את כל הheaders שמגיעים/נשלחים ביני לבין האתר

#### שפות פיתוח

**HTML** - "שפה" שמבוססת על טאגים, \<\> - תג פותח \</\> - תג סוגר

**CSS** - "שפה" שמיועדת לעצב ולייפות אתרים

**JavaScript** - שפת תכנות שנועד לעשות דברים (כמו כפתור ללחיצה, לחשב דברים וכו')

**PHP** - שפת תכנות שנועדה לקלוט טקסט ולעשות עליו מניפולציה ולשלוח לDataBase

**SQL** - שפה שנועדה לשלוף/לדחוף מידע

#### פגיעויות אתרים

תווים מיוחדים כמו: ' ; && || יכולים לעזור לנו לפרוץ לאתרים
ובמיוחד הסימן ' מהסיבה שהוא סוגר את הגרש הפותח

**Sql Injection** - שיטת תקיפה שבה התוקף יכול להזריק קוד זדוני באמצעות שפת SQL + תווים מיוחדים

הערות:

  - 1=1 - תנאי בשפת SQL שתמיד מחזיר תשובה חיובית
  - כשעובדים עם האופרטור OR בשפת SQL מספיק שאחד מהתנאים יעבוד בשביל לקבל תשובה חיובית

**sqlmap** - כלי פריצה לשליפת מידע מתוך Database

**File inclusion** - שיטת פירצה שבה אני יכול לשלוף מידע רגיש או להשיג שליטה על המכונה של האתר

**File upload** - שיטה להעלאת קבצים, יכולה להיות מאוד פגיעה

**XSS** - שיטת תקיפה שבה התוקף יכול להזריק קוד זדוני על המשתמש

ישנם 2 שיטות מוכרות לXSS:

  - **reflected xss** - הקוד הזדוני קיים בURL
  - **stored xss** - הקוד הזדוני קיים בתוך האתר

דוגמא לקוד XSS:

```html
<script>alert("I am an alert box!")</script>
```

#### כלים נוספים

**Burp Suite** - כלי תקיפה שנועד לעשות מניפולציה על הבקשות WEB

**WAF** - web application firewall - כלי הגנה שנועד למנוע מתקפות מסוג WEB

**dirbuster** - מנחש שמות של דפים מתוך האתר שלי ושולף מידע שהקורבן לא היה רוצה שיגיעו אליו

**HTTP status code** - הפרוקטול יודע להגיד האם הדף קיים או לא
לדוגמא:

  - 200 - הדף קיים
  - 404 - הדף לא קיים

**Nikto** - כלי פריצה שיודע למצוא פגיעויות וקונפיגורציה לא נכונה באתרים

**hyperlink** - דרך לשתף קישור מאחורי מסוימות

**DVWA** - DAMN VULNERABLE WEB APPLICATION - אתר פריץ בכוונה כמו metasploitable

**../** - מייצג תיקיה אחת אחורה בלינוקס

**macro** - אפשרות הרצת קוד על גבי מסמכים של office, לא מופעל בברירת מחדל, משתמשים בו הרבה בקמפיין פישינג

**kiwi/mimikatz** - כלי פריצה שנועד למערכות הפעלה ווינדוס שיכול לגנוב סיסמאות מוצפנות ולא רק

**dirb** - כלי פריצה שנועד לנחש בעזרת רשימת מילים מוגדרות איזה דפי אינטרנט אותו אתר מחזיק, אפשר להשמש בו בשלב הראשוני של הפריצה (Scanning)

### 99 - Project

#### סוגי פלט

2 סוגים של פלט מפקודה/סקריפט:

  - **stdout** - מצב תקין שחוזר פלט תקין - מיוצג על ידי הספרה 1
  - **stderr** - מצב שבו קרתה שגיאה - מיוצג על ידי הספרה 2

**null** - אין בו שום ערך

**/dev/null** - נתיב שבו לא משנה מה אני אפנה אליו הוא "יבלע" אותו כמו חור שחור

**2\>&1** - לוקח את 2 סוגי הפלטים האפשריים

ב2 הדוגמאות האלו לא יוצג לי שום פלט:

```bash
whoami > /dev/null 2>&1
whoami123 > /dev/null 2>&1
```

דוגמא ללקיחת שגיאת פלט ולהכניס אותה לפלט רגיל, יתרון: אפשר לעשות עם זה text manipulation

```bash
some_command 2>&1 | awk '{print $1,$3}'
```

#### תנאים

**תנאי בוליאני** - תנאי שבודק האם הוא נכון או לא נכון

לדוגמא:

```bash
if [ $user_name ]
then
echo "YES"
else
echo "NO"
fi
```

הפלט יהיה YES

**\!** - זה "לא" בקיצור

תנאים לבדיקת משתנים:

  - **-n** תנאי שבודק האם יש לנו ערכים במשתנה
  - **-z** תנאי שבודק האם אין לנו ערכים במשתנה

תנאים לבדיקת קבצים:

  - **-d** תנאי שבודק האם קיים תיקייה בנתיב מסוים
  - **-f** תנאי שבודק האם קיים קובץ בנתיב מסוים

**\\n** - תוו שאומר קפוץ שורה

**case** - פקודת תנאי נוספת מתקדמת שיכולה להכיל כמה תשובות רב ברירתיות

**while** - לולאה שיכולה להיות "אין סופית", יתרון שלה על גבי לולאת for זה שהוא לא מוגבל בטווח פעמים מסוימות

---

## 05 - Network Security

### 01 - Subnetting

#### מושגי רשת בסיסיים

**octat (אוקטטות)** - החלק המספרי שיש בכתובת IP

**ip address** - דרך לייצג יישות אחת/עמדת קצה/רכיב

**subnet mask** - דרך להציג על איזה רשת מדובר, לדוגמא: כמה כתובות IP אפשריים יכולים להיות בה

**CIDR** - עוד דרך לייצג subnet mask

**default gateway** - רכיב שמפריד בין רשתות, המטרה שלו להעביר אותנו לרשת אחרת, כל התעבורת רשת תעבור דרכו
הערה: בדרך כלל הכתובת IP שלו תהיה האחרונה ברשת שאפשר להשתמש בה, לדגומא 192.168.0.254

**IPv4** - גרסת כתובת IP הנפוצה שכולנו מכירים, לדוגמא: 192.168.0.1

**IPv6** - גרסת כתובת IP חדשה יותר שנועדה לתת מענה למחסור של כתובות IPv4, לדוגמא 2001:0db8:0000:0000:0000:ff00:0042:8329

**NAT** - פרוטוקול שנועד לתת מענה למחסור בכתובות IPv4 וגם להסתיר את המשתמש מאחורי כתובת IP אחרת

**class** - חלוקה לוגית שבה מוגדרים כמות מסוימת של כתובות IP אפשריות

**network address** - הכתובת הראשונה של הרשת, לדוגמא: 192.168.0.0

**broadcast address** - הכתובת האחרונה של הרשת, לדוגמא: 192.168.0.255

הערה: אי אפשר להשתמש בכתובת הראשונה והאחרונה

**HOP** - כמות הכתובות IP שעוברת בין רשת לרשת

**APIPA** - טווח רשת שמתקבל במידה ויש תקלת תקשורת/אין כתובת IP להקצות

**TTL** - פרוטוקול תקשורת שנועד לתת הסבר לכמה תחנות רשת אני עובר בדרך, הוא גם מגלה לנו על איזה סוג של מערכת הפעלה מדובר

**packet tracer** - תוכנה שנועד לעשות סימולציית רשת

#### רכיבי תקשורת

רכיבי תקשורת לדוגמא:

  - **PC** - עמדת קצה מסוג מחשב
  - **Server** - עמדת קצה מסוג שרת
  - **Switch** - רכיב תקשורת שעובד בשכבה ה2 (ARP), מחבר בין הרבה עמדות קצה
  - **Router** - רכיב תקשורת שעובד בשכבה ה3 (IP), יכול לשמש כ- default gateway

#### איך לעשות פיצול רשת לתתי רשתות ידנית?

1.  נמיר את המספר המרות לבינארי
2.  נספור את הכמות מספרים שמתחילה ב1 (לא מתחשבים ב0ים שלפני)
3.  נזין את הכמות המספרים שיצא לנו בבינארי ונוסיף את זה לCIDR הקיים וא יתקבל הCIDR החדש
4.  להציג את הCIDR החדש בצורה בינארית
5.  לראות איפה נמצא הספרה 1 האחרונה בCIDR החדש ולרשום אותו כמספר הכתובות בכל תת רשת (HOP)
6.  נזין את הCIDR החדש עם הHOP שיתקבל
7.  לא לשכוח להצהיר על הכתובת IP הראשונה והאחרונה בכל תת רשת
8.  לא לשכוח להשתמש רק בכתובת האחת אחרי הראשונה ואחת לפני האחרונה בכל תת רשת

### 02 - Network Attacks

#### פרוטוקולים

**Broadcast** - שיטת עבודה של הרבה פרוטוקולי תקשורת שבה המשתמש "צועק" לעזרה
לדוגמא: DHCP - פרוטוקול שמנהל ומחלק כתובות רשת בצורה אוטומטית

פרוטוקולי תקשורת:

  - **ARP** - פרוטוקול תקשורת שעובד בשכבה ה-2, ניתן לפרוץ אותו ולעשות מתקפת MITM
  - **SMB** - פרוטוקול תקשורת שעובד בשכבות שמעל 3, מאזין בפורט 445, ניתן לפרוץ אותו ולקבל מידע ועוד, מאוד ישן, יש לו כמה גרסאות
  - **NETBOIS/LLMNR** - פרוטוקל לתרגום שמות מחשב, ניתן לפרוץ אותו ולעשות מתקפת MITM, משמש לרשתות LAN

#### כלי תקיפה

**crackmapexec** - כלי פריצה שעובד עם כמה פרוטוקולים, במיוחד SMB

**Pass The Hash** - מתקפה ידועה שבא התוקף מנצל את זה שהוא נמצא באמצע התקשורת בין הקורבן לבין איפה שהקורבן רוצה להגיע (MITM) לטובת גניבת זהות/סיסמאות או להתחזות בשמו

**Responder** - כלי תקיפה מאוד מתקדם שיודע לעבוד עם שלל פרוטוקולי תקשורת ויודע בעצם להתחזות להרבה שירותים/שרתים מוכרים לדוגמא: DHCP/File Server

**DNSSEC** - שירות DNS אבל מתקדם ומוצפן

**SNORT/SURICATA** - כלי תקשורת שיודעים לראות אם יש דברים בעייתים ברשת שלנו

#### מתקפת MITM עם ARP

**OpCode** - מזהה ייחודי של סוג הבקשה
לדוגמא בפרוטוקול ARP:

  - REQUEST - 1
  - REPLY - 2

בשביל לבצע מתקפת MITM מוצלחת בעזרת פרוטוקל ARP:

לשלוח בקשות מסוג reply לdefault gateway:

```bash
sudo arpspoof -t 192.168.0.39 192.168.0.254
```

לשלוח בקשות מסוג reply לקורבן:

```bash
sudo arpspoof -t 192.168.0.254 192.168.0.39
```

הערה: במידה ונרצה לחדש את הכתובת IP שעובדת עם פרוטוקול DHCP נריץ את הפקודות הבאות:

```
ipconfig /release
ipconfig /renew
```

#### תיקיות משותפות וכלים

תיקיות משותפות בברירת מחדל על ידי פרוטוקול SMB:

  - $C
  - $ADMIN
  - $IPC

**nbtstat** - פקודה בווינדוס שעושה בדיקת תקשורת מסוג פרוטוקול NETBOIS

**Multicast** - כמו Broadcast - "צועק" להרבה מקומות

**mDNS** - עוד פרוטוקול שנועד לתרגם שמות לכתובות (כמו DNS), פגיע למתקפות כמו responder

**arp.duplicate-address-frame** - חיפוש בWireShark למציאת בקשות ARPים מזויפים

#### הזדהות

**NTLMv2** - פרוטוקול הזדהות ייעודי של מייקרוסופט

ככה הוא בנוי לדוגמא:

```
jbt::WIN10CLIENT:8ad3dba872747e96:01513784BD13B69EA5791F91A5F9A659:0101000000000000B8DD9F8051C3DB016CB08BD8E4D8879C00000000020008005A004C004C00490001001E00570049004E002D0034004F005000430048003800510036005A0048004E00040014005A004C004C0049002E004C004F00430041004C0003003400570049004E002D0034004F005000430048003800510036005A0048004E002E005A004C004C0049002E004C004F00430041004C00050014005A004C004C0049002E004C004F00430041004C000800300030000000000000000100000000200000699561E2B23F963FDDFAFA3200EEAD3E588301B27917BB938B55B3A50EDAF7A90A001000000000000000000000000000000000000900360048005400540050002F0063007900620065007200630079006200650072002E006C006F00630061006C0064006F006D00610069006E000000000000000000
```

  - jbt - user name
  - WIN10CLIENT - host name
  - 8ad3dba872747e96 - challenge
  - 01513784BD13B69EA5791F91A5F9A659 - ntproofstr
  - 0101000000000000B8DD9F8051C3DB016CB08BD8E4D8879C00000000020008005A004C004C00490001001E00570049004E002D0034004F005000430048003800510036005A0048004E00040014005A004C004C0049002E004C004F00430041004C0003003400570049004E002D0034004F005000430048003800510036005A0048004E002E005A004C004C0049002E004C004F00430041004C00050014005A004C004C0049002E004C004F00430041004C000800300030000000000000000100000000200000699561E2B23F963FDDFAFA3200EEAD3E588301B27917BB938B55B3A50EDAF7A90A001000000000000000000000000000000000000900360048005400540050002F0063007900620065007200630079006200650072002E006C006F00630061006C0064006F006D00610069006E000000000000000000 - ntlm\_response

הערה: לא לשכוח להסיר את התחילית של ntproofstr מתוך ntlm\_response

**printf** - פקודה לינוקס כמו echo, חזקה יותר

### 03 - Domain Setup

#### מערכות הפעלה

**מייקרוסופט** - החברה עם מערכת הפעלה (בתשלום) הכי נפוצה

**Windows** - מערכת הפעלה של מייקרוספוט

**ISO** - קובץ התקנה בעיקר למערכות הפעלה שמייצג תקליטור ווירטואלי

יש 2 סוגים עיקריים של מערכות הפעלה:

  - **Client** - הגרסה המוכרת שמותקנת על המחשבים
  - **Server** - הגרסה שפחות מוכרת שדורשת רישוי מיוחד

יש 2 תתי סוגים של שרתי Windows Server:

  - **GUI** - הגרסה המוכרת של Windows
  - **CLI** - גרסה שהיא דומה ללינוקס שבה יש רק חלונית של טרמינל כלשהו (powershell)

#### Domain

**Domain** - שייכות לקבוצה מסוימת שבה יש לנו שרת שינהל את אותה קבוצה וגם את התחנות קצה שיקבלו את השירותים של אותו מנהל

**WORKGROUP** - מציין שאין שייכות לשום Domain

דוגמאות לשירותים שאפשר לקבל ברגע שאני חבר בדומיין:

יתרונות:

  - ניהול הרשאות אחיד
  - ניהול חוקה אחידה
  - ניהול עדכוני אבטחה

חסרונות:

  - גורם לכך שכל השמות משתמשים וסיסמאות של כל הארגון נמצאים במקום 1

**Domain Controller** - סוג מסוים של שירות שקיים בשרת Windows שמכיל הרבה שירותים אחד מהם זה AD

**Active Directory (AD)** - שירות של Windows שיודע לנהל בעיקר אובייקטים/זהויות/הרשאות, בתנאי שהמחשב בתוך הDomain

הערה: כחלק מהשירותים שמותקנים ביחד עם הAD זה שירות DNS, בתנאי שהמחשב בתוך הDomain

#### DNS

ישנם סוגים שונים של בקשות DNS:

  - **A** - לקבלת תרגום שם לכתובת IPv4
  - **AAAA** - לקבלת תרגום שם לכתובת IPv6
  - **MX** - לקבלת תרגום שם לכתובת מייל
  - **CNAME** - לקבלת תרגום שם לכינוי
  - **TXT** - לקבלת תרגום שם למשהו אבל אני יכול על הדרך להכניס הרבה מידע לתוך הבקשה החוצה

**"להזליג מידע החוצה"** - לגנוב מידע ולהצליח להוציא אותו החוצה

**DHCP** - פרוטוקול/שירות שנותן לנו חלוקת כתובות IP בצורה אוטומטית, בתנאי שהמחשב בתוך הDomain
הערה: חלוקת כתובות IP נמשכות עד 8 ימים מרגע קבלתם

#### היררכיה בדומיין

ההיררכיה שיש בדומיין:

  - **forest** - מקבץ של כמה תתי דומיינים
  - **trees** - תתי רשומות של הforest
  - **domains** - הדומיינים עצמם
  - **organisational unit (ou)** - תתי רשומות תחת הדומיין
  - **Objects** - מחשבים/משתמשים/קבוצות

**NTDS.dit** - קובץ DB שקיים בתוך שרת AD שמכיל רשומות של כל המשתמשים/סיסמאות, בתנאי שהמחשב בתוך הDomain

**RAID** - שיטה לניהול דיסקים יעילה, אפשר לעשות גיבוי לדיסק, אפשר לגרום לו לעבוד יותר מהר

#### פרוטוקולים ושירותים

**kerberos** - פרוטוקול/שירות הזדהות מבוסס כרטיס שהוא מנפיק ושאפשר להזדהות איתו איפה שידרשו הזדהות
הערה: פרוטוקול שהוא פגיע למתקפות כמו pass the ticket

**LDAP** - פרוטוקול הזדהות מול הAD, עובד בפורט 389

**LDAPS** - אותו פרוטוקול כמו LDAP רק מוצפן, עובד בפורט 636

נקודה נוספת על LDAP - משמש לתשאול/חיפוש ומציאת אובייקטים בAD

**GPO** - ניהול חוקה אבל ברמה רוחבית, בתנאי שהמחשב בתוך הDomain
הערה: הפוליסי מתעדכן בין 30 ל90 דקות

**כתובת IP סטטית** - לא משתנה על ידי DHCP

**Vmware Tools** - נותן לנו אפשרות שליטה יותר טובה על המכונה ווירטואלית שלנו, שזה כולל: העתקת קבצים/טקסט

**POWERSHELL** - כל הפקודות שאפשר להריץ על גבי CMD אפשר גם להריץ עליו

**SYSVOL** - תקייה משותפת של הAD שאפשר לגשת אליה מכל תחנה שחברה בדומיין

**SID** - מזהה ייחודי של משתמשים, בדרך כלל משתמש ADMINISTRATOR יזוהה עם המספר 500 בסוף

**פורט 88** - הפורט שבו עובד הkerberos גם בשליחה וגם בקבלה

**realm** - השם של הדומיין רק באותיות גדולות ובלי נקודה, זה נותן לנו לנו שליטה לאיפה לשייך את המשתמש בעולמות של kerberos

**KDC** - שם השירות שמשרת את kerberos

הערה: כל שירות חייב שיהיה לו איזהשהו משתמש שיריץ אותו

**krbtgt** - משתמש הבעלים של השירות kerberos

### 04 - Domain Events

#### לוגים

**לוגים** - יומן אירועים שנותן לנו מידע כרונולוגי (על ציר הזמן) מה קרה לאותו מחשב/משתמש וכו

**Event Viewer** - כלי ברירת מחדל של מייקרוסופט לראיית/ניתוח/חיפוש לוגים

ישנם 3 "ערוצים" של לוגים מרכזיים:

  - **Application** - לוגים של מוצרי מייקרוסופט
  - **System** - לוגים של סיסטם ששמה אפשר לראות דברים כמו: שינוי זמן וכו'
  - **Security** - לוגים הכי "מעניינים" לאנשי אבטח מידע

**ForwardedEvents** - ערוץ לוגים שמאגד תחתיו לוגים של רכיבים אחרים

הערה: בברירת מחדל הרבה לוגים חשובים לא מוגדרים להיווצר, חובה עלינו כאנשי אבטחת מידע לדאוג לזה

#### GPO

GPO מחולק ל2 רמות של מדיניות:

  - **מדיניות ברמת משתמש** - לא משנה לאיפה המשתמש יתחבר הוא יקבל סט מסוים של מדיניות
  - **מדיניות ברמת שרת** - לא משנה מי יתחבר אליו הוא יקבל סט מסוים של מדיניות

**DLP** - data leak prevention - מושג שמתייחס לבעיית של גניבת מידע

הבדל בין authentication לבין authorization:

  - **authentication** - הזדהות, נותן לי לגשת לכל מיני מקומות
  - **authorization** - הרשאות, נותן לי הרשות גישה לכל מיני מקומות

הערה על GPO: לפעמים אנחנו נקבל אופציה של רק Failure, בשביל לפתור את זה פשוט תסמנו את הקוביה הראשונה, תצאו ואז תחזרו לסמן את שאר הקוביות

**gpupdate** - פקודה בווינדוס שמכריחה את המחשב לקבל את המדיניות (GPO) עכשיו\!, הולך בדרך כלל עם הדגל /force

הערה: אפשר להתחבר עם משתמש domain administrator ב2 דרכים:

  - your\_domain\_name\\administrator
  - administrator@your\_domain\_name

במידה ונרצה להתחבר עם משתמש מקומי למחשב שחבר בדומיין נעשה את הדבר הבא:

  - .\\your\_user\_name

יהיו פעמים שנעשית פעולה אחת אבל היא מיוצגת על גבי הרבה לוגים

### 05 - PowerShell

#### השוואות

**PowerShell vs CMD**:

  - **PowerShell** - שפת סקריפטים מתקדמת, עובדת בשיטת ה"pipeline" במו בbash, שפה מתעדכנת, נתמך על ידי לינוקס, להכניס שפות פיתוח עיליות מתקדמות כמו: dot net / c charp, ההיסטוריה של הפקודות נשמרות
  - **CMD** - שפת סקריפטים בסיסית, לא מתפתחת, לא מתעדכנת, בשאר מערכות הפעלה, אי אפשר להכניס שפות פיתוח עיליות מתקדמות, ההיסטוריה של הפקודות לא נשמרות

**PowerShell vs BASH**:

  - **PowerShell** - לא רגיש לגדלים השונים של התווים, יש דוקומנטציה בשפע, להכניס שפות פיתוח עיליות מתקדמות כמו: dot net / c charp
  - **BASH** - כן רגיש לגדלים השונים של התווים, קשה למצוא דוקומנטציה, אי אפשר להכניס שפות פיתוח עיליות מתקדמות

במידה ויש לנו רק חלון cmd ואנחנו רוצים להגיע לpowershell, אפשר להקליד powershell בחלון cmd

#### PowerShell ISE

**PowerShell ISE (Integrated Scripting Environment)** - עורך קוד של מייקרוסופט, קיים בכל הפצה של Windows

הערה:

  - בשביל להריץ סקריפטים בתוך ISE צריך ללחוץ על F5
  - במידה ונרצה להריץ רק מקטע קוד בתוך ISE צריך לסמן את המקטע הרצוי וללחוץ על F8

**ps1** - השם סיומת של קבצי PowerShell

**hostname** - פקודה בווינדוס שנותנת לנו שם מחשב

#### מבנה פקודות

פקודות של PowerShell בנויות מ2 חלקים עם פסיק באמצע:

1.  הפעולה שאותה נרצה לעשות כגון: get, set, delete
2.  על מה נרצה לעשות את הפעולה כגון: File, Directory, Service

**VMDK** - סיומת של קבצי כונן ווירטואלי

**OVF (Open Virtualization Format)** - סיומת של קבצים שמכילים הגדרות של השרת הווירטואלי

**Get-Host** - פקודה שנותנת לנו מידע על PowerShell

בpowershell יש לנו אפשרות ליצור כינויים לפקודות שלנו, לדוגמא:

  - Get-ChildItem - ls
  - Set-Location - cd

בשביל למצוא עוד כינויים אפשר להריץ Get-Alias

בpowershell הנתונים שיוצאים מפקודות נקראים אובייקטים
הערה: בברירת מחדל לא כל האובייקטים מוצגים, בשביל להציג צריך להריץ משהו כמו Select-Object \*

בpowershell קיים האופציה של דגלים, אפשר לראות מה האופציה של כל פקודה בעזרת הפקודה Get-Help

#### טיפים

במידה ואתם עובדים על שרת ווינדוס CLI וסגרתם את הטרמינל, אפשר לעשות את הפעולות הבאות:

  - ctrl + alt + insert או ctrl + shift + esc
  - ייפתח חלון משימות
  - לבחור File - Run New Task
  - לרשום powershell

בשביל להעתיק טקסט שקיים בטרמינל לעכבר שלי צריך לעשות את הפעולות הבאות:

  - לסמן עם העכבר את הטקסט הרצוי
  - לעשות פעמיים הקלה עם הצד השמאלי של העכבר
  - לעשות פעם אחת הקלקה עם הצד הימני של העכבר

**WMI (Windows Management Instrumentation)** - עוד יכולת בווינדוס לעשות פעולות בשורת פקודה

הערה: יש חשיבות גדולה למיקום שבו אנחנו שמים את הarguments שלנו בפקודות

**cmdlet** - איך שהפקודות PowerShell נקראות

**auth.log** - קובץ לוגים של שרת לינוקס שמראה נסיונות התחברות בSSH

הערה: ctrl + r - מראה לנו פקודות שהרצנו בעבר

### 06 - Domain Enumeration

#### מושגים

**אסינכרונית** - ריצה ללא תלות במקום הנוכחי

**POC (proof of concept)** - היכולת להוכיח משהו מאוד ספציפי

**Hyper-v** - הגרסה של מייקרוסופט לVmware Workstation

#### פקודות CMD

פקודות CMD:

  - **systeminfo** - נותן לנו מידע בסיסי על המערכת
  - **hostname** - מחזיר שם מחשב
  - **whoami** - מחזיר שם משתמש
  - **net user** - מחזיר לנו רשימה של משתמשים שקיימים במחשב/שרת
  - **net accounts** - מחזיר לנו את הפוליסת סיסמאות של המשתמש הנוכחי
  - **net group** - מחזיר לנו רשימה של קבוצות בדומיין (נתמך רק במי שחבר בדומיין)
  - **net localgroup** - מחזיר לנו רשימה של קבוצות מקומיות
  - **net view** - מחזיר לנו מי קיים ברשת המקומית איתי (יעבוד רק אם אפשרנו את זה)
  - **net share** - מחזיר לנו רשימה של תיקיות משותפות
  - **net session** - מחזיר לנו רשימה של כל הסשנים שקיימים על המשתמש הנוחי

**סשן** - הזמן שבו אני מחובר ב"לייב" מול שירות כלשהו, לדוגמא אתר

**%username%** - משתנה סביבתי של CMD שמחזיר תשובה של שם משתמש

#### RSAT וPowerShell

**RSAT (Remote Server Administration Tools)** - כלי של מייקרוסופט שנותן לנו גישה לצפייה/ניהול של כל האובייקטים שחברים בדומיין, וגם נותן לנו חבילת קוד לצפייה/ניהול של אובייקטים בAD

הערה על POWERSHELL: אפשר להכניס חבילות קוד שלמות שכבר נכתבו מראש (בדומה לפייתון)

פקודות POWERSHELL:

  - \*\*Get-ADuser -Filter \*\*\* - נותן לנו רשימה של משתמשים בדומיין
  - **Get-ADGroup** - נותן לנו רשימה של קבוצות בדומיין

\*\*-Filter \*\*\* - נותן לנו אפשרות לחפש על כל האובייקטים

#### פרוטוקולים וכלים

**RPC (remote procedure call)** - פרוטוקול שמייקרוספט בעיקר משתמשת בו

**NETEXEC** - כלי שנותן לנו מידע על גבי משתמשים בווינדוס

**WMIC** - כלי שורת פקודה בדומה לCMD רק שהוא מריץ WMI

**RID vs SID**:

  - RID - מכיל את הסיומת של ה SID

**GUID (Globally Unique Identifier)** - מזהה ייחודי נוסף

#### פילטור

הערה בנוגע לפילטור אובייקטים:
ככה נראית תבנית של פילטור:

```
| where-object {$_.<object name> <parameter name> <parameter value>}
```

פרמטרים לדוגמא:

  - **eq** - תנאי שבודק האם הערך זהה לחלוטין לאובייקט המתבקש
  - **ne** - תנאי שבודק האם הערך לא זהה לחלוטין לאובייקט המתבקש
  - **match** - תנאי שבודק האם הערך דומה לאובייקט המתבקש
  - **like** - תנאי שבודק האם הערך דומה לאובייקט המתבקש

**Domain Users** - קבוצת ברירת מחדל שמכילה כל מי שחבר בדומיין

אפשר לפלטר ב2 שיטות:

1.  לפי אובייקט - where-object
2.  לפי מחרוזת - select-string (או findstr בCMD)

**Test-NetConnection** - פקודה שנותנת חיווי על חיות של פורט, יכולה להחליף את הפקודה telnet

### 07 - Domain Exploitation

#### כלים ופרוטוקולים

**NSE** - יכולת מתקדמת של nmap לסריקה הרבה יותר מתקדמת

**IMPACKET** - חבילת קוד בפייתון שמתמחה בגניבת זהויות

**GetNPUsers.py** - סקריפט פייתון שמשתמש בחבילה של IMPACKET ויודע לדלות שמות משתמשים וכרטיסי kerberos

פרוטוקלים ישנים והכלים לפריצה לדוגמא:

  - **RPC** - הכלי rpcclient
  - **SMB** - הכלי crackmapexec
  - **KERBEROS** - הכלי impacket
  - **NTLM** - הכלים crackmapexec, impacket

#### מתקפות

**PASS-THE-HASH** - מתקפה שבה אני לא חייב לפרוץ את הסיסמה אלא רק מעביר הלאה את ההאש שהשגתי

**AS-REP** - חלק מהפרוטוקל של kerberos שיודע להגיד האם קיים משתשמש או לא ומה הכרטיס שלו

**MS17-010** - שם דומה לCVE של מייקרוסופט שמדבר על פגיעות מוכרת של מייקרוסופט שבה אפשר לקבל שליטה מלאה על המחשב בהרשאות הכי גבוהות

**BloodHound** - כלי פריצה מאוד מוכר לעולמות הAD, מציג את הנתונים בצורה מאוד וויזואלית לעין

#### התחמקות מגילוי

איך תוקף יכול להתחמק מגילוי:

  - לעבוד בזיכרון - אין לאנטי ווירוס גישה לשם
  - לכבות את הכלי אבטחה - אנטי ווירוס, פיירוול
  - לרשום פקודות בצורה שלא יוכלו לעלות עליי בעזרת כלים כמו SIEM
  - **LOLBAS** - פרויקט שבא ואומר שיש כלים שהם תמימים לכאורה אבל בפועל נמצאים בשימוש על ידי תוקפים

**TRUE POSITIVE** - התראת אמת - מתקבלת התראה שהיא התראה קריטית אמיתית

**FALSE POSITIVE** - התראת שווא - מתקבלת התראה שכביכול היא התראה קריטית אבל בפועל מדובר בטעות

#### ערוצי פלט

**STDOUT/STDERR** - ערוצי פלט של טקסט שעובר אחרי שאני עושה לו pipeline (|)

  - **STDOUT** - פלט שכביכול תקין שאפשר לפלטר בברירת מחדל
  - **STDERR** - פלט שכביכול לא תקין שאי אפשר לפלטר בברירת מחדל

**GZ** - סיומת של קובץ מסוג ארכיון דחוס במיוחד

**\~** - מסמן את מיקום הבית שלנו בהתאם למשתמש (/home/kali או /root)

**THREADS** - רכיב פנימי של מעבד שהפעולה של המעבד מגיעה לשמה

**REGEX** - שפה שבה אפשר למצוא דברים בצורה תבניתית לדוגמא: תעודת זהות יהיה \\d{9}

אפשר לחפש REGEX בפקודה grep בעזרת הדגל -E או לרשום את הפקודה egrep

**password spray** - מתקפה שבה אני מנסה הרבה סיסמאות על רשימת משתמשים ידועה מראש

**ver** - פקודה בווינדוס שנותנת את גרסת מערכת ההפעלה

---

## סיכום

קובץ זה מכיל את כל החומר שנלמד בקורס הסייבר JB-Magen-7736-30. הוא מחולק לפי נושאים ושיעורים ומכיל הגדרות מפורטות של כל המושגים, הכלים והטכניקות שנלמדו.

המילון מיועד לשמש כחומר עזר ללמידה וחזרה על החומר.